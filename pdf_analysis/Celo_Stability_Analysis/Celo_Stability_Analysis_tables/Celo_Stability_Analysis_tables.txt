     An Analysis of the Stability Characteristics of Celo


                                               cLabs Team∗

                                       DRAFT version 0.16


                                                Abstract
       Celo is a decentralized platform that will enable a family of crypto-collateralized/seigniorage-
   style stable value assets. This document analyzes the behavior of Celo stable value assets over
   a set of simulated scenarios.




∗ cLabs is one of the teams working on Celo.




                                                    1
                                               DRAFT



Contents

1 Introduction                                                                                      3
  1.1 Stability Mechanism . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .     3
  1.2 Stability Risks . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   3

2 Scenario Generation                                                                               3
  2.1 Non-Technical Introduction . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .      4
  2.2 Stochastic Processes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .    7

3 Demand: A Stochastic Anchor Point Model                                                            7
  3.1 Model Choice and Parameter Setting . . . . . . . . . . . . . . . . . . . . . . . . . .         8
  3.2 Shape of the Demand Curve . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .        9
  3.3 Modeling Demand Downward Pressure . . . . . . . . . . . . . . . . . . . . . . . . .            9
  3.4 Market Correlation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .    10

4 Supply: Matching the Demand to Stabilize the Price                                                11
  4.1 Adjusting Supply . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .    11
  4.2 Constraints to Adjusting Supply: The Value of the Reserve . . . . . . . . . . . . .           11
      4.2.1 Bootstrapping the Reserve . . . . . . . . . . . . . . . . . . . . . . . . . . . .       11
      4.2.2 Reserve Asset Allocation . . . . . . . . . . . . . . . . . . . . . . . . . . . .        11
      4.2.3 Simulating Non-Celo Reserve Assets . . . . . . . . . . . . . . . . . . . . . .          13
      4.2.4 Pricing Celo native asset . . . . . . . . . . . . . . . . . . . . . . . . . . . . .     14
      4.2.5 Additional Mechanisms to Bolster the Reserve . . . . . . . . . . . . . . . .            17
  4.3 Constraints to Adjusting Supply: Liquidity . . . . . . . . . . . . . . . . . . . . . .        17
      4.3.1 The Constant-Product Decentralized One-to-One Mechanism (CP-DOTO)                       17
      4.3.2 Modeling CP-DOTO Interactions . . . . . . . . . . . . . . . . . . . . . . . .           18
      4.3.3 CP-DOTO Parameter Settings . . . . . . . . . . . . . . . . . . . . . . . . .            22

5 Simulation Results                                                                                23

6 Conclusion                                                                                        25

Appendix                                                                                            27




                                                  2
                                                     DRAFT



1     Introduction
The Celo protocol [5] defines a decentralized payments system in which participants use coins that
track the value of a local fiat currency or a local basket of goods. In this paper, we investigate the
stability characteristics of Celo stable value assets through a series of simulations under various
market conditions. For simplicity, we focus on the case of a single asset, called the Celo Dollar,
that tracks the value of the US Dollar.

1.1     Stability Mechanism
The Celo protocol, at base, has two assets: Celo Dollar, an elastic-supply stable value asset1 ,
and CELO2 , a fixed-supply variable value asset. CELO is the utility token of the protocol and
serves multiple purposes. It is, for example, a central component of the consensus and governance
mechanism of the Celo protocol as voting power in validator elections and governance decisions is
proportional to the amount of CELO locked for voting. CELO is also elementary to the stability
mechanism: It is held in a reserve smart-contract and exchanged for Celo Dollars to balance
demand excess or shortage. In addition to CELO, a diversified basket of non-Celo crypto-assets
comprises the Celo reserve. This reserve is periodically rebalanced towards target asset allocation
set via on-chain governance. The Celo stability mechanism can thus be understood as hybrid
crypto-collateralization / seigniorage-style model.
    To balance Celo Dollar demand excess or shortage, the protocol sets incentives for users to
adjust Celo Dollar supply to match Celo Dollar demand at the price target. At a high level, the
Celo expansion and contraction mechanism allows users to create new Celo Dollars by sending
one US Dollar worth of CELO to the reserve, or to burn Celo Dollars by redeeming them for one
US Dollar worth of CELO. This mechanism, referred to as decentralized one-to-one mechanism
(DOTO) for the rest of this article, creates incentives such that when demand for the Celo Dollar
rises and the market price is above the target, an arbitrage profit can be achieved by buying one
US Dollar worth of CELO on the market, exchanging it with the protocol for one Celo Dollar, and
selling that Celo Dollar for the market price. Similarly, when demand for the Celo Dollar falls and
the market price is below the target, an arbitrage profit can be achieved by purchasing Celo Dollars
at the market price, exchanging it with the protocol for one US Dollar worth of CELO, and selling
the CELO to the market. These actions are expected to drive the market price of the Celo Dollar
back towards one US Dollar without the need for the protocol to estimate the optimal expansion
or contraction amounts. The exact expansion and contraction mechanism, which includes some
additional features, is described and analyzed in more detail in Section 4.3.1.

1.2     Stability Risks
The primary risk to Celo Dollar stability is a scenario in which there is a decrease in demand for
Celo Dollars greater than the total value of the reserves. In such a scenario, the protocol would be
unable to handle a sufficient contraction amount to meet decreased demand.
    A secondary risk is a scenario in which there exists enough value in the reserves to handle a
contraction in demand, but not enough market liquidity to sell the amount of crypto assets quickly
enough to handle the contraction.3
    To obtain an estimate of the likelihood of either of these risks under the given modelling
assumptions, we would need to model the demand for Celo Dollars, the value of the reserves, the
flows of Celo currency through the expansion and contraction mechanism and other major stability
related mechanics of the Celo protocol. We do so in the next four sections.


2     Scenario Generation
In this section we describe the scenario generator that creates the scenarios for the analysis of the
stability mechanism. Paragraph 2.1 provides a non-technical introduction and motivation of the
   1 In actuality, the Celo protocol allows for many stable value assets and many reserve assets [5]. However, the

analysis of the base case is generalizable to the multiple-asset case.
   2 CELO, the Celo native asset, was previously called Celo Gold or cGLD, and the name changed to CELO after a

community-driven governance proposal in June 2020.
   3 A similar risk occurs if the protocol cannot buy crypto assets quickly enough to handle an expansion in demand.




                                                         3
                                                DRAFT


scenario generation framework used in this paper. Technical details regarding the model choice are
covered in Appendix A. Section 2.2 provides a short description of the stochastic process that we
consider for the scenario generator. The final parameter settings used for the simulation of Celo
Dollar demand and the value of crypto assets for the analysis in this article are discussed in Section
3 and 4.2.3, respectively.

2.1    Non-Technical Introduction
At the core of our analysis is a Monte Carlo simulation that generates values for the key factors that
affect stability – principally, Celo Dollar demand, and the prices of the crypto assets in the reserve.
It is our intention to create a wide range of plausible scenarios that include steep downturns as well
as upturns, and to take into account scenarios that expose the stability mechanism to the risks
outlined in Section 1.2.
     We do not seek to forecast the future evolution of markets or to perform distribution fitting
to historical market data. Our simulation analysis covers up to 30 years, and long-term forecasts
cannot provide reliable results for such time scales. There exist attempts to analyse the distribution
of cryptocurrency prices (see f.ex. [2] or [10]), that all come to similar conclusions with regard to
general statistical shapes and characteristics. As expected, the results indicate that cryptocurrency
prices have semi-heavy or heavy tailed distributions. Yet there is disagreement with regard to
the distributions that provide the best statistical fit to the prices of individual cryptocurrencies.
Apart from methodological differences in the analyses, the differences might partially be caused by
different time intervals of historical data that have been chosen. It clearly indicates that successfully
fitting a distribution requires a challenging analysis on its own, and that, to no surprise, results are
highly dependent on time periods.
     Our current setup provides scenario generators that create paths from geometric Brownian
motions and geometric Ornstein-Uhlenbeck processes. The geometric Brownian motion is a widely
used stochastic process. It has been used in the analysis of other stable coin projects [1], [9] and
also in earlier versions of this stability analysis. However, depending on the parameter settings, the
geometric Brownian motion produces scenarios that tend to be unbalanced or even decaying to 0
evolving in time. In Figure 1 we have provided examples of three regimes of scenarios that can
occur. Each graph shows the evolution of 100 paths of a geometric Brownian motion simulated
with the same volatility parameter σ = 0.75 and different drift parameters (drift µ = 0, 21 σ 2 and
0.5). The characteristic behaviour of the evolution of the paths is visible: decay to 0, fluctuation
around the initial value and divergence to ∞. For example, Figure 1a shows significant downward
evolution of a large proportion of paths. The thick, colourful lines indicate the proportion of paths
that are below the line; 75% of the paths are below the red line and decay below a level of at least
approximately 0.0035 after 30 years. In other words a very large proportion of scenarios represent
downturn scenarios, and with time the number of downturn scenarios is increasing until eventually
almost all paths will be downturn scenarios. A more technical description and explanation of this
behaviour is provided in Appendix A.
     In contrast to the geometric Brownian motion, the geometric Ornstein-Uhlenbeck process has a
stationary distribution and converges towards it in time. As a consequence, scenarios of a geometric
Ornstein-Uhlenbeck process will not decay to 0 or diverge to ∞. In Figure 2 we have provided
examples of scenarios for parameter settings corresponding to the three examples in Figure 1. Over
time the proportions of paths within a fixed range settles as the process converges to its stationary
distribution. For example, Figure 2a shows large proportions of paths having a downwards trend
initially. As before, the thick, colourful lines indicate the proportion of paths below the line.
Towards year 30 the slope of these lines decreases increasingly and eventually would converge to 0.
Therefore, the percentiles will not decay to 0.
     In order to acknowledge the heavy tails that are observed in price distributions of cryptocurrencies,
we equip both processes with an additional jump process. The occurrence of a jump is determined
by a Poisson process and jump sizes are log-normally distributed random variables, a setup referred
to as compound Poisson process with log-normal jump sizes. On path-level, jumps introduce
movements that are more extreme than those of the geometric Brownian motion or the geometric
Ornstein-Uhlenbeck process.
     Celo Dollar demand and multiple crypto assests are simulated as a multivariate process, i.e.
they are simulated simultaneously and feature correlation between the different crypto assets as
well as correlation between Celo Dollar demand and crypto assets.



                                                    4
                                                                 DRAFT




                   GBM -- Downward Evolution                                                       GBM -- Fluctuating Evolution
  103                                                                                     95%-tile
                                                                                          75%-tile
                                                                               105        50%-tile
                                                                                          25%-tile
  101                                                                                     5%-tile

                                                                               103
 10 1

                                                                               101
 10 3

            5%-tile
            25%-tile                                                          10 1
 10 5       50%-tile
            75%-tile
            95%-tile
                                                                              10 3
        0      5       10     15        20       25         30                        0        5          10    15     20         25   30
                             Years                                                                             Years

(a) Percentiles and paths of the geometric Brow-                          (b) Percentiles and paths of the geometric Brow-
nian motion with drift µ = 0 and volatility                               nian motion with drift µ = 12 σ 2 and volatility
σ = 0.75. Eventually, all percentiles are decreas-                        σ = 0.75. At each time 50% of the mass is above
ing and converging to 0. Due to the logarith-                             and 50% is below the initial value. This specific
mically scaled y-axis convergence or divergence                           choice of µ is the only the parameter setting for
speeds might seem to be much lower than they                              which paths and percentiles are not decaying to
really are; exponential behaviour appears to be                           0 or diverging to ∞. Due to the logarithmically
only linear.                                                              scaled y-axis convergence or divergence speeds
                                                                          might seem to be much lower than they really
                                                                          are; exponential behaviour appears to be only
                                                                          linear.
                                                          GBM -- Upward Evolution
                                      109        95%-tile
                                                 75%-tile
                                                 50%-tile
                                      107        25%-tile
                                                 5%-tile

                                      105


                                      103


                                      101


                                     10 1
                                             0        5          10    15        20       25         30
                                                                      Years

                                 (c) Percentiles and paths of the geometric Brow-
                                 nian motion with drift µ = 0.5 and volatility
                                 σ = 0.75. Eventually, all percentiles are increas-
                                 ing and diverging to ∞. Due to the logarith-
                                 mically scaled y-axis convergence or divergence
                                 speeds might seem to be much lower than they
                                 really are; exponential behaviour appears to be
                                 only linear.

                                                                 Figure 1




                                                                      5
                                                               DRAFT



                   GOU -- Downward Evolution                                                    GOU -- Fluctuating Evolution
                                                                             105       95-%ile GOU
                                                                                       75-%ile GOU
  103                                                                                  50-%ile GOU
                                                                             104       25-%ile GOU
                                                                                       5-%ile GOU
                                                                             103
  101
                                                                             102

 10 1                                                                        101

                                                                             100
            95-%ile GOU
 10 3       75-%ile GOU                                                     10 1
            50-%ile GOU
            25-%ile GOU
            5-%ile GOU                                                      10 2
        0      5       10     15        20       25       30                       0        5         10    15      20         25   30
                             Years                                                                         Years

(a) Percentiles and paths of the geometric                              (b) Percentiles and paths of thegeometric
Ornstein-Uhlenbeck process with mean rever-                             Ornstein-Uhlenbeck process with mean rever-
sion speed κ = 0.05, volatility σ = 0.75 and drift                      sion speed κ = 0.03, volatility σ = 0.75 and
parameter Θ = 7.06. The parameters are cali-                            drift parameter Θ = 11.68. At each time 50%
brated such that the expectation value at time                          of the mass is above and 50% is below the initial
t = 30 years is equal to the initial value. Even-                       value. Due to the logarithmically scaled y-axis
tually, the slope of all percentiles will decrease                      convergence or divergence speeds might seem to
to 0 and all percentiles will be constant. The                          be much lower than they really are; exponential
paths will not decay to 0. Due to the logarith-                         behaviour appears to be only linear.
mically scaled y-axis convergence or divergence
speeds might seem to be much lower than they
really are; exponential behaviour appears to be
only linear.
                                                          GOU -- Upward Evolution
                                     1011        95-%ile GOU
                                                 75-%ile GOU
                                                 50-%ile GOU
                                                 25-%ile GOU
                                     109         5-%ile GOU

                                     107

                                     105

                                     103


                                     101

                                             0        5        10    15       20       25        30
                                                                    Years

                                 (c) Percentiles and paths of the geometric
                                 Ornstein-Uhlenbeck process with mean rever-
                                 sion speed κ = 0.03 and drift parameter Θ =
                                 36.95. The parameters are calibrated such that
                                 the expectation value at time t = 30 years is
                                 equal to 10e0.5×30 , the expectation value of the
                                 GBM in Figure 1c. Eventually, the slope of all
                                 percentiles will decrease to 0 and all percentiles
                                 will be constant. The paths will not diverge
                                 to ∞. Due to the logarithmically scaled y-axis
                                 convergence or divergence speeds might seem to
                                 be much lower than they really are; exponential
                                 behaviour appears to be only linear.

                                                               Figure 2


                                                                    6
                                                          DRAFT


2.2    Stochastic Processes
As discussed above the stochastic process used for the simulation of Celo Dollar demand and the
value of the crypto assets can be either a multivariate geometric Brownian motion or a multivariate
geometric Ornstein-Uhlenbeck with jumps from a compound Poisson process with log-normal jump
sizes. In this section we provide a short description of the multivariate process without including
many details about the specific application to the case of Celo Dollar demand or crypto assets.
These details including the individual parameter settings are discussed in Sections 3.1 and 4.2.3.
Geometric Brownian Motion: In the case of the geometric Brownian motion the process Xti ,
i = 1, . . . , n is defined by the following equation
                                                                    Nti
                                                                    Y                            Nt
                                        1                                                         Y
               Xti = X0i exp       (µi − (σ i )2 )t + σi Wti                   exp(Yji,idio )             exp(Yjsyst ) ,   (1)
                                        2                                j=1                      j=1


where µi is the drift parameter, σi is the volatility parameter of process Xti and {Wti }, i = 1, . . . , n
are Brownian motions with correlation ρij . Each process Xti has an idiosyncratic jump component
with Poisson process Nti with intensity λiidio and jump size Yti,idio . The jump size random variables
Yti,idio are independent from one another and the Poisson process and identically distributed with
a normal distribution with parameters µiidio and σidioi


                                          Yti,idio ∼ N µiidio , (σidio
                                                                  i
                                                                       )2
                                                                                    
                                                                                        .                                  (2)

Crypto assets have an additional systematic jump component with Poisson process Nt with intensity
λsyst and jump size Yisyst . The systematic jump size Yisyst is independent from the Poisson process
and identically distributed with normal distribution with parameters µsyst and σsyst

                                      Ytsyst ∼ N µsyst , σsyst
                                                          2
                                                               
                                                                 .                               (3)

Geometric Ornstein-Uhlenbeck: In the case of the geometric Ornstein-Uhlenbeck the process
Xti , i = 1, . . . , n is given by
                                                                   Z t
                                                 σ2
                                                                                       
                                  e−κt
                        Xti = X0i       exp (θi − i )(1 − e−κt ) +     σi e−κ(t−s) dWsi   (4)
                                                 2κi                0
                               i
                            Nt                                     Nt
                            Y                        −κi (t−tj )   Y                        −κi (t−tj )
                        ×          exp(Yji,idio )e                       exp(Yjsyst )e                    ,
                            j=1                                    j=1

where κi is the mean reversion speed parameter, Θi the drift parameter σi is the volatility parameter
of process Xti and {Wti }, i = 1, . . . , n are Brownian motions with correlation ρij . Each process Xti
has an idiosyncratic jump component with Poisson process Nti with intensity λiidio and jump size
Yti,idio . The jump size random variables Yti,idio are independent from one another and the Poisson
                                                                                                 j
process and identically distributed with a normal distribution with parameters µiidio and σidio

                                          Yti,idio ∼ N µiidio , (σidio
                                                                  i
                                                                       )2
                                                                                    
                                                                                        .                                  (5)

Crypto assets have an additional systematic jump component with Poisson process Nt with intensity
λsyst and jump size Yisyst . The systematic jump size Yisyst is independent from the Poisson process
and identically distributed with normal distribution with parameters µsyst and σsyst

                                      Ytsyst ∼ N µsyst , σsyst
                                                          2
                                                               
                                                                 .                               (6)


3     Demand: A Stochastic Anchor Point Model
The demand quantity Qt represents the demand for Celo Dollars at the price of one US Dollar and
is simulated as one of the processes of the multivariate stochastic process used for the scenario
generator. In Section 3.1 we provide details about the specific setup and the parameter setting of
the demand process used for the stability analysis. Changes of demand lead to an demand excess
or shortage and may trigger the expansion and contraction mechanism (see Section 4.3).


                                                               7
                                                  DRAFT


                                         Parameter        Value
                                         Q0               20 000 000
                                         κd               0.001
                                                                      2
                                         Θd               ln Q0 + σ2κ
                                         σd               1
                                         λdidio           5
                                         µdidio           0
                                           d
                                         σidio            0.3

Table 1: Parameter setting used for the simulation of the Celo Dollar demand quantity Qt for the
analysis of the stability mechanism (see Section 5).


3.1    Model Choice and Parameter Setting
With the parameter setting of the Celo Dollar demand process we are trying to take into account
the requirements for the scenario generation that we have outlined in Section 2. It is our intention
to create a wide range of plausible scenarios that include steep downturns as well as upturns and to
take into account scenarios that expose the stability mechanism to the stability risks outlined in
Section 1.2.
Model Choice: We choose a geometric Ornstein-Uhlenbeck process with jumps from a compound
Poisson process for the scenario generation (see Section 2.2). The reasons are explained in a
non-technical way in Section 2 (see Appendix A for a more technically involved discussion).
Parameter Setting: We choose a drift parameter Θd such that 50% of the paths are above and
50% are below the initial value. By rearranging Equation (68) and using pN (50%) = 0, the drift
parameter Θd can be expressed as a function of κd , σd and the target value at time t

                                       1                    −κd t
                                                                           σd2
                           Θd =               ln target − e       ln Q0   +     .                       (7)
                                   1 − e−κd t                               2κd
Our target value is the assumed initial demand Q0 . Therefore the drift parameter ΘD is given by

                                                              σd2
                                              Θd = ln Q0 +        .                                     (8)
                                                              2κd

    Crypto markets exhibit a comparably high volatility; annualised volatilities4 around 1 or
significantly above 1 are common. These volatilities can be observed for prices as well as market
capitalisation. While it is indeed arguable, whether the volatility of price returns is a good indicator
for the volatility of demand, the market capitalisation of a stable coin might be considered as a
proxy value for the demand at the price target. We use the magnitude of the observed volatilities
to have a rough estimate. As the percentiles of the process scale with the parameter σd , i. e. larger
σd values create wider percentiles (see Equation (68)), the final parameter is ultimately set such
that it yields sufficiently wide percentiles. With the final parameter setting (see Table 1) the ranges
limited by the 5th and 95th and the 1st and 99th percentile at t = 30 years are approximately
[4 × 104 , 5 × 1013 ] and [6 × 102 , 3 × 1015 ]. Figure 3 shows the evolution of a few percentiles obtained
with the same parameter setting.
    The mean reversion parameter κd has influence on how fast the percentiles become constant
which prevents the decay and divergence that can occur with geometric Brownian motions (see
Section 2). In the case of the specific parameter setting of the drift parameter θd (constant 50th
percentile) we do not really require this feature of the geometric Ornstein-Uhlenbeck process. Hence,
we set the mean reversion speed to a low value κd = 0.001.
    For the jump process we follow the idea of the heuristic 3σ rule according to which events that
deviate more than three standard deviations from the mean are considered to be an outlier. With a
                                                                                                  d
volatility parameter of σd = 1, we set the standard deviation of the jump size process σidio          = 0.3.
                                                            σ       6
We have obtained this value by rounding down 6 √360 = √360 , i.e. six times the daily volatility
                                                              d



  4 Standard deviation of log-returns




                                                      8
                                                           DRAFT




                                                Celo Dollar Demand -- Percentiles
                                     1016
                                                1-%ile
                                                25-%ile
                                     1014       50-%ile
                                                75-%ile
                                     1012       99-%ile

                                     1010
                            Demand
                                     108

                                     106

                                     104

                                            0     5       10       15      20   25   30
                                                                 Years

Figure 3: This figure shows empirical percentiles (sample size = 10 000) of the Celo Dollar demand
processes using the parameter settings summarised in Table 1. As a reference the dashed lines show
the theoretical percentiles of a geometric Ornstein-Uhlenbeck process without jumps. At each time
t, 50% of the paths are above the initial value and 50% of the paths are below the initial value.


√σd .  In case of a normal distribution an event of larger or equal to 3σ occurs with probability
 360
0.3%, which would be approximately once in 360 days. We set the jump intensity of the Poisson
process λdidio = 5 to have five additional events per year on average. The jump process leads to an
additional widening of the percentiles. This can been seen in Figure 3 by comparing the solid lines
with the dashed lines.

3.2     Shape of the Demand Curve
For each stochastic anchor point simulated via the stochastic model described in the last section,
we span a demand curve assuming the following functional form
                                                                      Qt
                                                               qt =                                                 (9)
                                                                      pt

where the stochastic anchor point Qt gives the demand at the $1 price target generated by the
stochastic model, and qt denotes the demand at price pt . 5 This demand curve model allows to
calculate the price of Celo Dollars in cases where supply cannot match demand – see, for example,
Figure 4, a scenario in which the demand for Celo Dollars (at 1 US Dollar) at time step t is
Qt = 20M . If Celo Dollar supply is 20M coins (green line), then the peg is maintained in this
simulation. If Celo Dollar supply is only 19M (for example due to constrained liquidity, orange
line), a Celo Dollar price of $1.05 results.

3.3     Modeling Demand Downward Pressure
Celo Dollar demand might not be entirely exogenous but could be affected by the value of the Celo
reserve. In other words, low reserve ratios may lead to lower demand for Celo Dollars. The Celo
reserve and how it is modeled in this analysis is discussed in detail in Section 4.2.
    To account for potential downwards pressure on Celo Dollar demand in times in which the
Celo reserve is low, we model a demand multiplier Mtd that reduces the simulated Celo Dollar
demand in response to a low reserve. More precisely, the pre-generated Celo Dollar demand anchor
points Qt are multiplied by Mtd which is modeled as the following piece-wise linear function of the
crypto-reserve-ratio rrtc
   5 This is an initial modeling assumption; in future work we will explore how sensitive our stability results are with

respect to changes in the elasticity of demand.



                                                                  9
                                                             DRAFT



                                Demand and Supply of Celo Dollar at Some Time Step


                                                                                 Demand
                          2
                                                                                 Supply: De-Pegging Case
                                                                                 Supply: Perfect Peg Case




                         1.5
                 price




                          1




                         0.5




                          0

                          17M           18M            19M               20M          21M                   22M



                                                              quantity


Figure 4: This Figure shows an example demand curve for Celo Dollars in our model. In this,
case a demand for Qt = 20M coins is generated via a stochastic process. The rest of the demand
curve is then constructed around this anchor by assuming the parametric form of the demand curve
described by Equation (9). This setup allows us to model the price of Celo Dollars in cases where
the protocol is unable to expand or contract the supply sufficiently.


                                                      (
                                                       1        if rrtc ≥ τ d
                                              Mtd =    rrtc                       ,                               (10)
                                                       τd
                                                                if 0 ≤ rrtc < τ d
where rrtc is defined as the ratio of the US Dollar value of the non-Celo part of the reserve over the
total Celo Dollar supply. The simulations conducted in this analysis assume τ d = 0.5. This implies
that the Celo Dollar demand at the target is discounted as soon as the value of the non-Celo part
of the Celo reserve drops below a level at which it could cover 50% of the total Celo Dollar supply.
    The above demand multiplier can lead to demand downward spirals as a drop in Celo Dollar
demand leads to a contraction of supply, which in times of a already low crypto-reserve-ratio
decreases the multiplier, which in turn reduces the Celo Dollar demand further, and so forth. The
downward spiral effect is especially pronounced when a similar multiplier is introduced for the value
of CELO. Such a multiplier is also used in this analysis and discussed in Section 4.2.4.3.

3.4    Market Correlation
As described in Section 2.2 Celo Dollar demand and crypto asset prices are generated by a
multivariate process. We set the correlation between demand and crypto asset prices to a positive
value to take into account scenarios in which a global dynamic of the crypto market affects demand
and crypto asset prices. In particular, a simultaneous decrease in demand and crypto asset prices is
a risk driver for the stability of the mechanism (see Section 1.2).
    The correlations ρd,ai between the Celo Dollar demand and the crypto assets are generated by
truncated normal random variables restricted to [−1, 1] with probability density function
                                                             
                                                         x−µ
                                                      φ σρ ρ
                               f (x, µρ , σρ ) =                   ,                       (11)
                                                   1−µ         −1−µρ
                                                Φ σρ ρ − Φ       σρ

where µρ is the mean parameter, σρ the volatility parameter and φ and Φ are the probability
density and the distribution function of the standard normal distribution, respectively. For the
simulation analysis we set the mean parameter µρ = 0.5 and the volatility parameter σρ = 0.05.
As a consequence the correlations ρd,ai between Celo Dollar demand and the crypto asset will be
around 0.5.


                                                                10
                                                      DRAFT



4       Supply: Matching the Demand to Stabilize the Price
The last section describes the stochastic model used to generate Celo Dollar demand scenarios in
this simulation analysis. This section explains how protocol driven supply adjustments in response
to demand changes are modeled. Section 4.1 outlines how supply adjustments are achieved by
assuming a representative agent that takes all arbitrage opportunities when interacting with the
Celo expansion and contraction mechanism. Sections 4.2 and 4.3 explain the constraints to adjusting
supply, namely the value of the Celo reserve and the liquidity constraints introduced via the Celo
expansion and contraction mechanism.

4.1     Adjusting Supply
This section explains on a high level how supply adjustments are calculated in this simulation
analysis. With CP-DOTO participants have the constant possibility to interact with the expansion
and contraction mechanism. For the sake of this simulation analysis, we have modelled a step-wise
approach: We assume that at t = 0, the market is in an equilibrium state and the demand Q0 is
matching the supply S0 = Q0 resulting in a Celo Dollar price of one. At time t = 1 the demand
has been changed to Q1 by the scenario generator. Unless Q1 = S0 , the demand excess or shortage
Q1 − S0 causes the Celo Dollar price to deviate from 1. In case of a depeg the expansion and
contraction mechanism (see Section 4.3) is triggered and adjusts the supply from S0 to S1 . Based
on the demand Q1 and the supply S1 the price p1 is calculated. In the next step the demand
changes to Q2 leading to a potential demand excess or shortage of Q2 − S1 which again triggers the
expansion and contraction mechanism. More generally, at time t we are starting with a demand
quantity Qt and a supply St . The scenario generator creates a new demand quantity Qt+1 . If
the new demand leads to a demand excess or shortage Qt+1 − St causing the Celo Dollar price to
deviate, the expansion and contraction mechanism is triggered and adjusts the supply from St to
St+1 . As a result, at time t + 1 we have a demand quantity Qt+1 , a supply of St+1 and a Celo
Dollar price pt+1 . These steps are illustrated in Figure 5.
    There are two main constraints to adjusting Celo Dollar supply: the value of the reserve (the
supply of Celo Dollars cannot contract by more than the value of the reserve), and liquidity (the
supply of Celo Dollars cannot expand or contract quicker than the market’s willingness to sell or
buy reserve assets through the expansion and contraction mechanism).
    Section 4.2 describes how the reserve value is modeled whereas Section 4.3 explains how market
liquidity and the Celo expansion and contraction mechanism is modeled.

4.2     Constraints to Adjusting Supply: The Value of the Reserve
The protocol cannot contract more Celo Dollar supply than the value of the reserve. This section
describes how the value of the reserve is modeled in our simulation analysis.

4.2.1    Bootstrapping the Reserve
The reserve portfolio is bootstrapped from CELO that is initially allocated to the reserve. A
fraction of this CELO is exchanged to a basket of non-Celo crypto assets that is also deposited in
the reserve to reach an initial reserve target allocation.
    With both, CELO and non-Celo assets in the reserve, Celo Dollars can be purchased into
existence via the stability mechanism and are additionally backed by the new reserve assets used for
the purchase. Our analysis assumes that the initial reserve shows a balance of Greserve = 120 million
CELO coins and that the total number is limited to Gtotal = 1 billion, which is the maximum
number of CELO coins ever to exist in the actual production network.

4.2.2    Reserve Asset Allocation
The reserve consists of CELO and a diversified basket of non-Celo crypto assets, and is periodically
rebalanced to achieve a target ratio rg of CELO and non-Celo assets6 .
   For modeling purposes, we assume an equal weighting of N = 3 volatile crypto assets for the
non-Celo portion of the reserve, with bi-weekly rebalancing for this simulation (fbal = 14). We
   6 The target ratio in our model is 1:1, so that 50% of the reserve is held as CELO, and 50% is held as a diversified

basket of cryptocurrencies.


                                                          11
                                                DRAFT


                                     Q0            p0            S0


                                     SG
                                                   Q1
                                                                 CP


                                     Q1            p1            S1


                                     SG
                                                   Q2
                                                                 CP


                                     Q2            p2            S2


                                     SG
                                                   Q3
                                                                 CP


                                     Qt            pt            St


                                     SG
                                                  Qt+1
                                                                 CP




Figure 5: Flow chart of the Celo Dollar demand and supply progression in the simulation. pt
denotes the price that results from the demand and supply quantity given at time t. SG represents
the scenario generator that provides the next demand quantity. Whenever the Celo Dollar price
deviates from 1, the expansion and contraction mechanism is triggered and adjusts the supply.
The expansion and contraction mechanism, called CP-DOTO, is denoted CP. The position of the
CP node is deliberately displaced with respect to the SG node as the contraction and expansion
mechanism responds to changes of the demand by the scenario generator.


chose this approach – as opposed to more passive methods like market-cap weighted indexing,
or more active methods like those described by Markowitz ([7], optimize risk/return), Kelly ([6],
optimize log-utility), or Michaud ([8], include estimation risk in defining portfolio optimality) –
because market-cap weighted indexing would lead to high single-asset concentrations and methods
like Kelly, Markowitz or Michaud are highly dependent on input parameters. In finance literature,
portfolios based on a naive 1/N heuristic are standard benchmarks to more sophisticated allocation
methods, and in our case, a portfolio constructed in this manner would provide a comprehensible
lower-bound for this stability analysis.
    In addition to the N volatile assets, we assume that there are non-volatile reserve crypto assets
with a initial annual default probability of λdef ault and that this default probability declines linearly
to 0 over the simulated 30 year period. Reserve rebalancings are conducted such that a fraction h
of the non-Celo reserve is held in this non-volatile asset after rebalancing is completed. The fraction
h is modeled as a linear function of the crypto-reserve-ratio rrtc , i.e. the Celo Dollar supply over
the US Dollar value of the non-Celo crypto reserve. More precisely,
                                       
                                       1
                                                       if rrtc < τ1r
                                              rrtc −τ1r
                                 ht = 1 − τ r −τ r if rrtc ∈ [τ1r , τ0r ]                             (12)
                                              0     1

                                         0              if rrtc > τ0r
                                       

   In this analysis, we assume τ1r = 0.75 and τ0r = 1.5


                                                   12
                                                      DRAFT


                                        Parameter        Value
                                        A0               normalised to 1
                                        κa               0.001
                                                                    σ2
                                        Θa               ln A0 + 2κaa
                                        σa               0.8
                                        λaidio           5
                                        µaidio           0
                                          a
                                        σidio            0.3
                                        λsyst            2
                                        µsyst            0
                                        σsyst            0.3

Table 2: Parameter setting used for the simulation of crypto assets for the analysis of the stability
mechanism (see Section 5).


4.2.3   Simulating Non-Celo Reserve Assets
For the scenario generation of crypto assets we follow a similar approach as for the scenario
generation of the demand quantity. With the parameter setting of the crypto asset processes we
are trying to take into account the requirements for the scenario generation that we have outlined
in Section 2. It is our intention to create a wide range of plausible scenarios that include steep
downturns as well as upturns and to take into account scenarios that expose the stability mechanism
to the stability risks outlined in Section 1.2.
Model Choice: We choose a geometric Ornstein-Uhlenbeck process with jumps from a compound
Poisson process for the scenario generation (see Section 2.2). The reasons are discussed in Section 2
(see Appendix A for a more technical discussion).
Parameter Setting: At first we would like to set the drift parameter Θa such that 50% of the
paths are above and 50% are below the initial value. By rearranging Equation (68) and using
pN (50%) = 0, the drift parameter Θa can be expressed as a function of κa , σa and the target value
at time t
                                  1                    −κa t
                                                                        σa2
                         Θa =            ln target − e       ln A 0   +      .                 (13)
                              1 − e−κa t                                2κa
Our target value is the initial value target = A0 . Therefore the drift parameter Θa is given by

                                                                 σa2
                                                 Θa = ln A0 +        .                                (14)
                                                                2κa

    Crypto markets exhibit a comparably high volatility; annualised volatilities7 around 1 or
significantly above 1 are common. We use the magnitude of the observed volatilities to have a
rough estimate. As the percentiles of the process scale with the parameter σa , i. e. larger σa
values create wider percentiles (see Equation (68)), the final parameter is ultimately set such that
it yields sufficiently wide percentiles. With the final parameter setting (see Table 2) the ranges
limited by the 5th and 95th and the 1st and 99th percentile at t = 30 years are approximately
[1 × 10−5 , 7 × 104 ] and [8 × 10−8 , 8 × 106 ]. Figure 6 shows the evolution of a few percentiles obtained
with the same parameter setting.
    The mean reversion parameter κa has influence on how fast the percentiles become constant
which prevents the decay and divergence that can occur with geometric Brownian motions (see
Section 2). In the case of the specific parameter setting of the drift parameter θ (constant 50th
percentile) we do not really require this feature of the geometric Ornstein-Uhlenbeck process. Hence,
we set the mean reversion speed to a low value κa = 0.001.
    The process of a crypto asset both has an idiosyncratic and a systematic jump component. For
both components we follow the idea of the heuristic 3σ rule according to which events that deviate
more than three standard deviations from the mean are considered to be an outlier. With a volatility
  7 Standard deviation of log-returns




                                                        13
                                                             DRAFT




                                                     Crypto Assets -- Percentiles
                                        106

                                        104

                                        102

                         Asset Price    100

                                       10 2

                                       10 4       99-%ile
                                                  75-%ile
                                                  50-%ile
                                       10 6       25-%ile
                                                  1-%ile
                                              0     5       10     15    20     25   30
                                                                 Years

Figure 6: This figure shows empirical percentiles (sample size = 10 000) of the crypto asset process
using the parameter settings summarised in Table 2. As a reference the dashed lines show the
theoretical percentiles of a geometric Ornstein-Uhlenbeck process without jumps. At each time t,
50% of the paths are above the initial value and 50% of the paths are below the initial value.


parameter of σa = 1, we set the volatility parameter of the idiosyncratic and the systematic jump
                a
size variable σidio = 0.3. We have obtained this value by rounding down 6 √σ360    d      6
                                                                                      = √360 , i.e. six
                            σ
times the daily volatility √360 . In the case of a normal distribution, an event of larger or equal to
                              d


3σ occurs with probability 0.3%, which would be approximately once in 360 days. We set the jump
intensity of the idiosyncratic Poisson process λaidio = 5 to have five additional idiosyncratic events
per year on average and the jump intensity of the systematic Poisson process λsyst = 2 to have two
additional systematic events. The jump process leads to an additional widening of the percentiles.
This can been seen in Figure 6 by comparing the solid lines with the dashed lines.
    To model the correlation ρai ,aj between crypto assets, we assume that the returns of the reserve
assets follow a single factor structure, as per [3]:

                                                   Rt = βft + t                                   (15)

                                       with ft ∼ N µf , σf2
                                                            
                                                              and t ∼ N (0, Σ )
where µf and σf2 influence the average of the drift parameters and the average of the variance of
the assets respectively. Σ gives the covariance matrix of the error terms and is assumed to be
diagonal with volatilities drawn from a uniform distribution with a specific support [σ,l , σ,u ]. The
elements of β are spread evenly between 0.5 and 1.5.
    DeMiguel [3] chose the parameters µf , σf , σ,l and σ,u such that the resulting moments are
aligned with empirically observed equity returns. For our purposes, we would like to be able to
choose different sets of parameters that capture a range of possible future scenarios. We do so by
adjusting the DeMiguel approach such that it allows us to specify an average mean return and an
average volatility, and then extrapolate the mean return vector and covariance matrix given those
inputs. The implementation used in this version of the stability analysis assumes N = 10 assets in
the reserve.

4.2.4   Pricing Celo native asset
To price the Celo portion of the reserve, we must come up with a pricing model for CELO. The
pricing model we derive in this section is an effort to demonstrate potential outcomes in a stability
analysis, and are not intended to show or suggest that CELO will appreciate in value.
    Like in pricing models for actual gold or other traditional reserve assets, we assume that there
are multiple components to the value of CELO. In our case, we assume two: the first, which we
call the expansion value, is based on the protocol-directed purchases of CELO when the demand


                                                                 14
                                                    DRAFT


for Celo Dollars increases. The second, which we call the utility value, is based on the fact that
transaction fees on the Celo network can be paid in CELO.
    We also assume that the market participants, which in aggregate hold all floating CELO at time
point t, expect their CELO ownership to be diluted over time - for example by block rewards and
reserve transactions. More precisely, we assume that the ownership fraction ωt for u ≥ t can be
described as
                                    ωt (u) = ω exp(−ν(u − t))                                 (16)
with ω = 1, ν > 0 and where ν denotes the fraction of annual ownership dilution.

4.2.4.1    Expansion Value
The expansion value, qualitatively, derives from the fact that, on expansion in demand for Celo
Dollars, the protocol will purchase CELO.
     Assume that market participants observe a Celo Dollar demand Qt at time t and that, for
simplicity, they anticipate a Celo Dollar demand growth with a rate of µ̂ ≥ 0 (no uncertainty). Also
assume that the demand at 1 US Dollar at time t equals the supply, i.e. Qt = St , and that the
protocol can be expected to match supply to demand. The Celo Dollar demand Q̂t (u) and supply
Ŝt (u) at a future time u with u > t anticipated8 by market participants at time t < u who are
observing the demand Qt is given by:

                     Q̂t (u) = Qt exp(µ̂(t − s))     and Ŝt (u) = St exp(µ̂(t − s)) .                   (17)

The anticipated demand Q̂t (u) and supply Ŝt (u) are calculated for every simulated time point s
along each simulation path k, i.e. formally we would need another index (e.g. Qkt and Q̂kt (u)).
However, we drop the path index k for the sake of simplicity and assume that all the following
formulas are defined for every individual path. The expected instantaneous expansion of supply is
thus
                                        dŜt (u) = µ̂St (u)du.                               (18)
In this model, the present value at time t generated through future expansions, Vte , can be calculated
by integrating over the product of the expected fractional ownership and the discounted expansion
amounts                         Z ∞
                      V e (t) =     ωt (u) exp(−r(u − t)) µ̂St exp(µ̂(u − t)) du .                 (19)
                                  t
where r is the discount rate. Evaluating this integral
                                          µ̂St                               ∞
                              Vte =              [exp [(µ̂ − r − ν) (u − t)]]t                           (20)
                                      µ̂ − r − ν
under the assumption r + ν > µ̂ gives
                                                        µ̂
                                            Vte =              St .                                      (21)
                                                    r + ν − µ̂
If an annual stability fee of size s is introduced, then this increases the necessary expansion rate
from µ̂ to µ̂ + s and thus leads to an expansion value of CELO of
                                                       µ̂ + s
                                          Vte =                   St                                     (22)
                                                   r + ν − µ̂ − s
    The derivation of this result can be seen as a variation of the Gordon Growth model [4]. If one
for example assumes positive Celo Dollar demand growth of 5%, a 10% ownership dilution, a 0.5%
                                                              Ve
stability fee and a discount rate of 25%, than a multiplier Stt = 0.1864 results. If we assume zero
growth in Celo Dollar demand, i.e. µ̂ = 0, Equation (22) would reduce to
                                                       s
                                            Vte =          St                                            (23)
                                                     r+ν−s
                            Ve
which leads to a ratio of St0 = 0.0145.
   8 The stochastic process Q is unknown to the market participants. As part of their purchasing decision they
                             t
form an opinion about the future growth given a currently observable demand Qt . Therefore, the demand Q̂t (u)
                                                                            E
anticipated by the market participants is not the same as the expectation value [Qt ].


                                                      15
                                                    DRAFT


4.2.4.2    Utility Value
The utility value of CELO derives from the fact that transaction fees are paid in CELO9 . If Celo
Dollar holders pay a transaction fee f for each transaction, the incremental fee is:

                                             dFs (u) = vf Ŝt (u)du.                                         (24)

where v is the annual velocity of Celo Dollars.
   Just as in the calculation of the expansion value, the utility value follows from integrating over
the product of the expected fractional ownership and the discounted expected future inflows:
                              Z ∞
                        Vtu =      ωu exp(−r(u − t)) vf St exp(µ̂(u − t)) dt.                    (25)
                                    t

Evaluating this integral
                                              vf St                         ∞
                                   Vtu =              [exp [(µ̂ − r − ν) u]]t                                (26)
                                           µ̂ − r − ν
under the assumption that r + ν > µ̂ results in a utility value of:
                                                         vf
                                              Vtu =              St .                                        (27)
                                                      r + ν − µ̂

4.2.4.3    Modeling CELO Downward Pressure
To account for potential downward pressure on the value of CELO in times in which the Celo
reserve is critically low, we model a value multiplier M g that reduces the total value of floating
CELO as a function of the crypto-reserve-ratio rrc , that is the total stable token supply over the
value of the non-Celo part of the crypto reserve. This multiplier is modeled as a piece-wise linear
function as follows
                                         (
                                     g     1    if rrtc ≥ τ g
                                  Mt = rrtc                       .                            (28)
                                            τg  if 0 ≤ rrtc < τ g
    The simulations conducted in this analysis assume τ g = 0.5. This implies that the value of
CELO is discounted as soon as the value of the non-Celo part of the Celo crypto reserve drops
below a level at which it could cover 50% or less of the total stable token supply.
    The above multiplier can lead to downward spirals in the value of the CELO reserve as a drop in
the value of CELO leads to a reserve rebalancing in which more CELO is bought via non-Celo crypto
assets. This reduces the crypto-reserve-ratio, which in times of a already low crypto-reserve-ratio
decreases the multiplier, which reduces the value of the CELO reserve further and so forth. The
downward spiral effect is especially pronounced when a similar multiplier is introduced for the Celo
Dollar demand. Such a multiplier is also employed in this analysis and was introduced in Section
3.3.

4.2.4.4    Total Value and Price


The total value Vt of CELO in float is calculated as the sum of the expansion and the utility value
adjusted by the downward pressure multiplier:

                                             Vt = Mtg (Vte + Vtu ) .                                         (29)

Additionally, we assume a lower bound on the total value of CELO in float of 3/2 of the value of
the non-Celo reserve as buying up 2/3 of the floating CELO would allow an individual to gain
control over the proof-of-stake network and therefore the non-Celo reserve. Future versions of this
article might account for potential additional value drivers of CELO, like a governance token value
and a value derived from expected future reserve rebalancings, and will refine the pricing model
used in this article
   9 Transaction fees may also be paid in Celo Dollars. Therefore, part of the value derived from transaction fees

could be counted towards the expansion value since Celo Dollar-denominated transaction fees can be expected to
increase the demand for Celo Dollars. Stability should not be fundamentally affected by this and we will model the
Celo Dollar-denominated transaction fee scenario explicitly in a future version of this paper.


                                                        16
                                                    DRAFT


    Once we have the total value Vt of CELO in float at time t, we can compute the price pt of a
single CELO coin as follows:
                                                 Vt
                                          pt =      .                                       (30)
                                                Gt
where Gt is the quantity of CELO in float at time t (not counting CELO in the reserve). In our
model, the number of coins in the reserve and float is known at any time t, and so we can use pt to
derive a value of the CELO portion of the reserve at time t.

4.2.5     Additional Mechanisms to Bolster the Reserve
In addition to the natural price dynamics of the reserve, two additional mechanisms serve to bolster
the reserve.

4.2.5.1    Block Reward Distribution Scheme
On Celo, a fraction of the epoch rewards is distributed to the reserve during times in which the
reserve ratio is below a certain threshold. This threshold is modeled as a linear function, decreasing
from 2 to 1 over the course of 25 years. The simulation assumes that 25% of the epoch rewards, i.e.
the fraction that would be distributed to the community fund during normal times, are redirected
to the reserve if this threshold is crossed.

4.2.5.2    Reserve Fee
For every trade with the Celo reserve exchange, the reserve charges a small percentage fee ρ. All
proceeds from this fee go towards bolstering the reserve.

4.3     Constraints to Adjusting Supply: Liquidity
Even during times of a sufficiently large reserve, depegs can occur if there are liquidity related
frictions during expansions and contractions of Celo Dollar supply. This section describes the
Celo expansion and contraction mechanism, called CP-DOTO and the liquidity related risks this
mechanism faces. It then describes how these risks are modelled in this analysis.

4.3.1     The Constant-Product Decentralized One-to-One Mechanism (CP-DOTO)
At a high level, the Celo expansion and contraction mechanism allows users to create new Celo
Dollars by sending 1 US Dollar worth of CELO to the reserve, or to burn Celo Dollars by redeeming
them for 1 US Dollar worth of CELO(decentralized one-to-one mechanism (DOTO)). In order for a
user to send 1 US Dollar worth of CELO to the reserve, or redeem 1 US Dollar worth of CELO from
the reserve, the protocol needs an oracle to give the exact price of CELO in US Dollars. In cases
where the CELO to US Dollar oracle value is imprecise (in other words, if CELO is trading on the
market at a different price than what the oracle reports), arbitrage opportunities exist even if the
Celo Dollar is perfectly pegged10 . These unintended arbitrage opportunities can lead to unintended
supply adjustments and reserve depletion. The next section describes the implementation of the
above mechanism that mitigates this potential.
   To address the risk of imprecise oracle values for the CELO to US Dollar exchange rate in
the DOTO mechanism, the protocol uses a constant-product market-maker model (CP), inspired
by Uniswap (see [12]), to dynamically adjust the on-chain exchange rate in response to on-chain
exchange activity. For that purpose, two wallets controlled by the protocol, one containing Celo
Dollars and one containing CELO, are initialized whenever the oracle value is updated. Let Gr (t0 )
denote the number of CELO coins and C r (t0 ) the number of Celo Dollar coins in the respective
wallets at initialization. The central equation for the constant-product market-maker model fixes
the following relationship:

                         Gr (t0 ) × C r (t0 ) = Gr (s) × C r (s)     ∀ t0 ≤ s < t1 ,                         (31)
  10 To give a concrete example, if the oracle reports the price of CELO as $1.50, and CELO is trading on the open

market for $2, then users have an incentive to redeem their Celo Dollars for CELO from the reserve at $1.50 and
then sell the CELO on the open market for $2. Further, in that scenario, nobody would buy Celo Dollars from the
reserve, because they will need to pay $2 worth of CELO to buy 1.50 Celo Dollars.




                                                       17
                                                  DRAFT


where t1 denotes the point in time of the next oracle value update.
   Given this, it can be shown (see [12]) that the price for an infinitesimal amount of CELO in
Celo Dollar units in the period t0 ≤ s < t1 is

                                                      C r (s)
                                               Ps =           .                                    (32)
                                                      Gr (s)

Whenever the oracle price of CELO is updated, the protocol initializes wallet quantities C r (t) and
Gr (t) that lead to a on-chain price Pt which equals the current oracle rate.
    If the oracle price is correct, the exchange rate quoted by the constant-product market-maker
will be equal to that of the market, and no arbitrage opportunity will exist if the Celo Dollar is
pegged. If the oracle price is incorrect, the two rates will differ, and an arbitrage opportunity will
exist even in the absence of a Celo Dollar depeg. As arbitrageurs exploit this opportunity the
constant-product market-maker model will dynamically adjust the quoted exchange rate until the
arbitrage opportunity ceases to exist. This limits the depletion potential of the Celo expansion and
contraction mechanism in the case of an incorrect oracle price.
    In this analysis, we take the conservative approach of assuming that no external market makers
or other market participants are willing to compensate short-term fluctuation of the Celo Dollar at
market places on their own account. The short-term price fluctuations resulting in this simulation
analysis are thus a conservative estimate of the short-term stability of the Celo Dollar.

4.3.2     Modeling CP-DOTO Interactions
In this section we are providing an analytical discussion of the mechanics of CP-DOTO for a specific
market setup. First we describe the setup and its assumptions. This is followed by a summary of
the key outcomes of the analysis. The formal results behind those outcomes and their proofs can
be found in Appendix B. The parameters used in the examples discussed below are provided in
Table 3.

4.3.2.1    Model Setup
The model setup can be decomposed into two components: the on-chain market and the open
market. Both components are illustrated in Figure 7. As described in Section 4.3.1 the on-chain
market is following the CP-DOTO mechanism. The on-chain price of CELO at time t quoted in Celo
Dollar is denoted by Pt . On-chain Celo Dollar and CELO are represented by wallets. We denote
the amount of Celo Dollar and CELO in each wallet at time t by C r (t) and Gr (t), respectively. At
the time of an oracle update t the amount of CELO Gr (t) is chosen as a fraction φr of the CELO
amount in the reserve
                                   Gr (t) = φr × Reserve CELO                                  (33)
and the Celo Dollar amount is set to

                                             C r (t) = Pt Gr (t) .                                 (34)

Due to the constant-product market maker the following equation is satisfied at all times s and t
within one oracle update cycle:

                                       C r (s)Gr (s) = C r (t)Gr (t) .                             (35)

    For the open market we are considering Celo Dollar, CELO and US Dollar each represented
by a hypothetical tank with tank size C m (t), Gm (t) and U m (t). We denote the market prices by
Xgc (t), Xgu (t) and Xcu (t). This convention follows the rule that a symbol ’X’ denotes the price of
currency in sub-script quoted in the currency in super-script. We are assuming that all arbitrage
opportunities within the currency triangle of the open market will immediately vanish due to
arbitrage trading. In particular, we are assuming
                                                           1                       1
                Xcu (t) = Xgu (t)Xcg (t) ,   Xcu (t) =           ,   Xgu (t) =           ,   ...   (36)
                                                         Xuc (t)                 Xug (t)

   Tank sizes and market prices are related by the assumption that the relative sizes of the tanks
are given by:


                                                      18
                                                    DRAFT



                                                         Um


                                            Xcu                      Xgu

                                                       Market


                                       Cm                                  Gm
                                                         Xgc


                                                          P
                                       Cr                CP                Gr

Figure 7: The diagram illustrates the model setup. It shows the three market tanks C m , Gm and
U m and the market prices Xgc , Xgu and Xcu . Below the market currency triangle, CP-DOTO is
represented by the two wallets C r and Gr . On-chain transactions (Celo Dollar ↔ CELO) are
determined by the constant-product market maker (CP ) at a price P . The dashed lines indicate
transfers with the open market and the on-chain CP-DOTO mechanism.


                    C m (t)      c        U m (t)      u         U m (t)
                            =  X g (t) ,           = Xg  (t) and         = Xcu (t) .         (37)
                    Gm (t)                Gm (t)                 C m (t)
    For every transaction with CP-DOTO a relative fee ρ will be applied. If M Celo Dollars
are transferred ρM Celo Dollars will be burned and effectively (1 − ρ)M Celo Dollars will reach
CP-DOTO, if M CELO tokens are transferred to CP-DOTO ρM CELO tokens will be send to the
reserve and effectively (1 − ρ)M CELO tokens will reach CP-DOTO.
    Under the assumption that the Celo Dollar price has deviated from the peg it follows that the
CELO price quoted in US Dollar Xgu (t) is different from the CELO price quoted in Celo Dollar
Xgc (t)
                                                     Xgu (t)
                    1 6= Xcu (t) = Xgu (t)Xcg (t)) = c        ⇔ Xgu (t) 6= Xgc (t) .         (38)
                                                     Xg (t)
By construction, at time t of an oracle update the on-chain CELO price Pt (quoted in Celo Dollar)
is equal to the market CELO price Xgu (t)
                                                  Pt = Xgu (t) .                                         (39)
Therefore, the on-chain CELO price Pt is different from the market CELO price Xgc (t)
                                                  Pt 6= Xgc (t) .                                        (40)
From the perspective of arbitrage traders two cases are profitable:
   1. (1 − ρ)Xgc (t) > Pt which is equivalent to Xcu (t) = Xgu (t)Xgc (t) < 1 − ρ
                                                                             1
   2. Xgc (t) < (1 − ρ)Pt which is equivalent to Xcu (t) = Xgu (t)Xgc (t) > 1−ρ .
   In both cases we are assuming that arbitrage traders will take advantage of the arbitrage
opportunity until it vanishes at time te , i.e. until either (1 − ρ)Xgc (te ) = Pte or Xgc (te ) = (1 − ρ)Pte .
We refer to each of these states as the equilibrium state.
   In the first case the equilibrium state is described by the following set of equations of unknown
time te quantities:

                                                       (1 − ρ)Xgc (te ) = Pte                            (41)
                                                         r       r              r   r
                                                       C (te )G (te ) = C (t)G (t)                       (42)
                         r         m               m           m                r       m
                       C (te ) + C (te ) + ρ(C (t) − C (te )) = C (t) + C (t)                            (43)
                                                   r            m               r       m
                                                  G (te ) + G (te ) = G (t) + G (t) .                    (44)


                                                         19
                                                     DRAFT


  The set of equations can be solved to give solutions with regard to time t quantities (see
Appendix B for details). We state the CELO price Pte and the Celo Dollar price Xgu (te )

                                       C r (t) + (1 − ρ)C m (t)
                                Pt e =                                                               (45)
                                            Gr (t) + Gm (t)
                                          U                    U
                            Xgu (te ) = m        =    q                 .                            (46)
                                       C (te )           P
                                                    1− P t
                                                          te  r    m
                                                      1−ρ C (t) − C (t)

   In the second case the equilibrium state is described by a similar set of unknown time te
quantities:


                                                                     Xgc (te ) = (1 − ρ)Pte          (47)
                                                           r             r        r          r
                                                       C (te )G (te ) = C (t)G (t)                   (48)
                                                   r                  m           r              m
                                                 C (te ) + C (te ) = C (t) + C (t)                   (49)
                       r          m               m                  m            r              m
                     G (te ) + G (te ) + ρ(G (t) − G (te )) = G (t) + G (t) .                        (50)

The set of equations can be solved to give solutions with regard to time t quantities (see Appendix
B for details). We state the CELO price Pte and the Celo Dollar price Xgu (te )

                                                  C r (t) + C m (t)
                                      Pt e =                                                         (51)
                                               Gr (t) + (1 − ρ)Gm (t)
                                                                     U
                               Xgu (te ) =            q                                .           (52)
                                                           Pt
                                                1−         Pte       C r (t) − C m (t)


4.3.2.2   Major CP-DOTO Properties
In this section we are discussing the key observations about CP-DOTO applied to the theoretical
model setup described above. All observations have to be considered as statements that are only true
within this model setup. They cannot be directly transferred to real market situations. However,
they help to gauge expectations of the effect of CP-DOTO.

Approaching the peg
After one arbitrage cycle has been completed, on-chain and open market CELO prices Pte and
Xgc (t) are equal apart from the fee related spread:

                           (1 − ρ)Xgc (te ) = Pte       or Xgc (te ) = (1 − ρ)Pte .                  (53)

Even though on-chain and open market CELO price are equal, the Celo Dollar price Xcu (t) will not
reach the target price exactly after a single step in this model (even if the fee is set to ρ = 0). The
intuitive reason for this behaviour is that the arbitrage cycle affects both open market tank sizes
(Celo Dollar and CELO) representing the CELO price Xgc (t) in inverse directions simultaneously.
But it only affects one market tank size (Celo Dollar) representing the Celo Dollar price quoted in
US Dollar Xcu (t).
    In order to reach the peg, multiple oracle updates must be performed. This means after an
update of the on-chain price Pt1 := Xuc (t1 ) arbitrage trading through CP-DOTO leads to an
equilibrium state at time te1 : On-chain and open market CELO prices are equally apart from the
fee related spread. The Celo Dollar price Xcu (te1 ), however, has not reached the exact peg yet.
Therefore, the on-chain CELO price is updated and set to the open market CELO price quoted in
US Dollar Pt2 := Xuc (t2 ). After the update a new arbitrage cycle starts. By repeating the oracle
update, the Celo Dollar price is converging towards the peg. In Figure 8 the evolution of the three
market prices is shown under multiple oracle update and arbitrage cycles. It should be pointed out
that this model does not take other market participants into account who form expectations of
the price and trade accordingly. Accounting for such actors could speed up the process of price
convergence further.



                                                           20
                                                   DRAFT



                                          Evolution of Market FX Rates
                        3.0                                                              XGU
                                                                                         XGC
                                                                                         XCU
                        2.5


                        2.0


                        1.5


                        1.0


                              0       2      4      6          8     10    12       14
                                                        Iterations

Figure 8: Evolution of prices for multiple oracle update iterations. With each iteration, the Celo
Dollar price Xcu (t) moves closer to the target.


Benefit of high on-chain liquidity
The on-chain and open market price in the equilibrium state at time te ranges between the initial
on-chain and open market prices at time t:
                                                                 1
            Xgu (t) = Pt < Pte < (1 − ρ)Xgc (t) or                   X c (t) < Pte < Pt = Xgu (t) .   (54)
                                                              (1 − ρ) g
The position of CELO price within this range depends on the size of the on-chain wallet sizes in
comparison to the open marked tank sizes. The larger the tank sizes in comparison to the open
market tank sizes(Gr (t) vs. Gm (t) or C r (t) vs. C m (t)), the closer the price at equilibrium Pte will
be to the oracle value Pt = Xgu (t) and vice versa.
     The impact of the on-chain tank size on the convergence speed of the Celo Dollar price Xcu (t)
is illustrated in Figure 9. Two relative sizes of the on-chain CELO wallet and the market CELO
tank are analysed.11 The blue line in Figure 9 has been created with an initial relative tank size
      m
                                                                                Gm (t0 )
of GGr (t 0)
        (t0 = 50% and the orange line with an initial relative tank size of Gr (t0 = 5%. The large
relative tank size results in a faster convergence of the Celo Dollar price towards 1.

Drawback of high on-chain liquidity
Malicious attacks that target the oracle value can be used to deplete the reserve by enforcing
artificial arbitrage opportunities that lead to a net outflow of CELO from the on-chain wallet into
the market. In Figure 10a the cumulative CELO outflow from the on-chain wallet into the open
market is shown in the case of an attack that updates the on-chain CELO price Pt := 15 Xgu (t)
with 20% of the true market CELO price Xcu (t) in every update and arbitrage cycle. To capture
the effect on the CELO reserve the cumulative amount of CELO transferred from the on-chain
wallet to the open market is shown. Two different settings with regard to the size of the on-chain
CELO wallet (10% or 0.1% of the CELO amount in the reserve) are analysed. In Figure 10a the
net outflow into the market after 100 iterations is equal to the reserve amount of 100m CELO; the
reserve has been depleted. In Figure 10b the net outflow after 100 iterations is only 6m. The larger
wallet size (reserve fraction of 10%) leads to a higher speed of CELO outflow.
    The faster depletion in the case of larger on-chain tanks has two reasons. Firstly, the size of the
on-chain CELO tank is a natural bound for the amount of CELO that can be transferred to the
 11 The on-chain tank size is kept constant and the market tank size is adjusted.




                                                         21
                                               DRAFT



                                   Wallet Size Effect on Pegging Speed
                      1.00

                      0.95

                      0.90

                      0.85

                      0.80

                      0.75

                      0.70                                 XCU - larger CELO wallet
                                                           XCU - smaller CELO wallet
                             0           5            10           15            20
                                                  Iterations

Figure 9: Two relative sizes of the on-chain CELO wallet and the market CELO tank are analysed.
                                                                                   m
The blue line in Figure 9 has been created with an initial relative tank size of GGr (t 0)
                                                                                     (t0 = 50% and
                                                       m
the orange line with an initial relative tank size of GGr (t 0)
                                                          (t0 = 5%. The large relative tank size results
in a faster convergence of the Celo Dollar price towards 1.


open market within on cycle. Secondly, due to the pricing effect of the constant product market
maker, the same amount of CELO is cheaper the larger the on-chain tanks are.

4.3.3   CP-DOTO Parameter Settings
In this simulation analysis, we modeled that the CP-DOTO oracle is updated 24 times per day
            1
(fupdate = 24 ) and that a representative agent takes the resulting arbitrage opportunities after every
update such that the equilibrium (including the new Celo Dollar supply) described in Appendix B
is reached. The CELO tank is set to φr = 10% of the total amount of CELO in the reserve after
every oracle update following Equation (33). Subsequently, the Celo Dollar tank size is chosen in
accordance with Equation (34) such that the CP-DOTO price Pt reflects the reported oracle value.
The CP-DOTO fee is set to ρ = 0.005. The resulting Celo Dollar supply after the 24 daily updates
is used to derive the end-of-day Celo Dollar price in the simulated time step via the demand curve
model described in Equation (9).




                                                  22
                                                         DRAFT



          1e8   CELO Outflow On-Chain to Open Market                            CELO Outflow On-Chain to Open Market
    1.0         Cumulative CELO Flow                              6000000         Cumulative CELO Flow


    0.8                                                           5000000

                                                                  4000000
    0.6
                                                                  3000000

    0.4
                                                                  2000000

    0.2                                                           1000000

                                                                       0
           0         20        40           60   80    100                  0        20        40         60   80      100
                                 Iterations                                                     Iterations

                  (a) Reserve Fraction 10%                                      (b) Reserve Fraction 0.1%

Figure 10: Assume the oracle feed is under a malicious attack. Instead of the true CELO market
price Xgu (t) the value 15 Xgu (t) is used to update the on-chain price Pt := 15 Xgu (t). To capture the
effect on the CELO reserve the cumulative amount of CELO transferred from the on-chain wallet
to the open market is shown. Two different settings with regard to the size of the on-chain CELO
wallet (10% or 0.1% of the CELO amount in the reserve) are analysed. In Figure 10a the net
outflow into the market after 100 iterations is equal to the reserve amount of 100m CELO; the
reserve has been depleted. In Figure 10b the net outflow after 100 iterations is only 6m. The larger
wallet size (reserve fraction of 10%) leads to faster CELO outflows.


5    Simulation Results
Using the stochastic models for Celo Dollar demand and the crypto market, as well as the model of
supply adjustments via interactions with CP-DOTO, we analyzed the price stability of the Celo
Dollar by simulating a wide range of possible scenarios.
    Table 4, which can be found in Appendix 5, gives a collective overview over the parameter
setting for which we simulated 100,000 paths. Each path has daily time steps and simulates a
period of 30 years assuming 360 days per year. This gives a total of 1.08 Billion simulated days in
which the supply adjustments to changes in Celo Dollar demand are calculated.
    Figure 11 focuses on the depeg scenarios by showing 0.1% and 0.01% percentiles of the simulated
Celo Dollar price paths. The figure indicates that there is a non-zero chance of a permanent depeg
of the Celo Dollar price but the relative frequency of such permanent depegs is very low in our
simulation model as they only show in these percentiles. The occurrence of these permanent depegs
are directly related to the downward spirals modeled as described in Sections 3.3 and 4.2.4.3. In
these paths, a very negative crypto market evolution in combination with a strong decrease in Celo
Dollar demand reduces the crypto-reserve-ratio so that a downward pressure eventually leads to a
permanent depeg. For order of magnitude one could compare the percentiles of the depeg scenarios
to historic credit events. While these are different distributions, and data for the likelihood of a
default over a particular time horizon is not widely available, some research exists on the historic
default rates of bonds with a credit rating. Based on the Standard & Poor’s Global Report ([11])
the global average cumulative default rate from 1981-2017 for a AAA rated bond is 0.13% over 3
years and 0.24% over 4 years.
    Figure 12 shows 1% up to 99.99% percentiles for the Celo Dollar price for every day of the
simulated 30 year period. It can be seen that the Celo Dollar price closely tracks the price of 1 US
Dollar for the vast majority of the simulated paths. Fluctuations around 1 US Dollar are slightly
larger in the first few years than later into the 30 years period but large deviations are rare under
the modeling assumptions made in this article.
    All results shown and discussed in this section must be seen in light of the modeling assumptions,
parameter choices and general limitations of this simulation analysis. Many of the parameter
choices are necessarily subjective and the chosen protocol parameters might not coincide with the


                                                             23
                                                      DRAFT



                             1.0
                                                                                  percentile_0.9%
                                                                                  percentile_0.8%
                             0.8                                                  percentile_0.7%
                                                                                  percentile_0.6%
                                                                                  percentile_0.5%
Celo Dollar Price (in USD)




                                                                                  percentile_0.4%
                             0.6                                                  percentile_0.3%
                                                                                  percentile_0.2%
                                                                                  percentile_0.1%
                                                                                  percentile_0.01%
                             0.4



                             0.2



                             0.0
                                    0   2000   4000                6000   8000             10000
                                                        Days


Figure 11: Depeg scenarios: Per-day Celo Dollar price percentiles in USD, 0.9% to 0.01%, for every
day across the simulated 30 year period. Such permanent depegs occur with very low relative
frequency in our simulation model given the chosen parameters.

                             1.07

                             1.06                                                percentile_99.99%
                                                                                 percentile_99.9%
                                                                                 percentile_99.0%
                             1.05                                                percentile_95.0%
                                                                                 percentile_90.0%
Celo Dollar Price (in USD)




                             1.04                                                percentile_10.0%
                                                                                 percentile_5.0%
                             1.03                                                percentile_1.0%

                             1.02

                             1.01

                             1.00

                             0.99

                                    0   2000   4000                6000   8000             10000
                                                            Days


Figure 12: Per-day Celo Dollar price percentiles in USD, 1% to 99.99%, for the simulated 30 year
period.


parameters at launch of the Celo network. Also, additional actors like external liquidity providers
could have significant influence on stability. Risk diversification of the Celo reserve can be expected
to be of central importance for Celo Dollar price stability and as the crypto asset market matures,
additional low-volatility and tokenized assets classes might become available which could help with
further diversifying the risk of the reserve.




                                                       24
                                              DRAFT



6    Conclusion
The purpose of this analysis is to gain a better understanding of the stability-related mechanics of
the Celo protocol. Future versions of the analysis will continue to refine the Celo Dollar demand
and supply adjustment models. Further, in future versions we plan to model large scale adversarial
attacks, and include additional features of the protocol that we did not include in the current
version, for example by introducing multiple stable value assets.
   All results in this analysis must be taken with caution as they are derived under specific modeling
assumptions and parameter choices. Modeling certain features differently and/or choosing different
parameter settings will necessary lead to different results.




                                                 25
                                            DRAFT



References
 [1] Nader Al-Naji, Josh Chen, and Lawrence Diao. Basis: A price-stable cryptocurrency with an
     algorithmic central bank. 06 2018.

 [2] Stephen Chan, Jeffrey Chu, Saralees Nadarajah, and Joerg Osterrieder. A statistical analysis
     of cryptocurrencies. Journal of Risk and Financial Management, 10:12, 05 2017.
 [3] Victor DeMiguel, Lorenzo Garlappi, and Raman Uppal. Optimal versus naive diversification:
     How inefficient is the 1/N portfolio strategy? Review of Financial Studies, 22(5):1915–1953,
     2009.

 [4] M.J Gordon and Eli Shapiro. Capital Equipment Analysis: The Required Rate of Profit.
     Management Science, 3(1):102–110, 1956.
 [5] Sep Kamvar, Marek Olszewski, and Rene Reinsberg. Celo: A Multi-Asset Cryptographic
     Protocol for Decentralized Social Payments, 2018.

 [6] John L. Kelly. A new interpretation of information rate. Bell System Technology Journal,
     35:917–926, 1956.
 [7] Harry Markowitz. Portfolio Selection. The Journal of Finance, 7(1):77–91, 1952.
 [8] Robert Michaud. Efficient Asset Management. Boston: Harvard Business School Press, 1998.

 [9] Nicholas Platias and Marco Di Maggio. Terra money: Stability stress test. 05 2019.
[10] Jan Jakub Szczygielski, Andreas Karathanasopoulos, and Adam Zaremba. One shape fits
     all? a comprehensive examination of cryptocurrency return distributions. Applied Economics
     Letters, 0(0):1–7, 2019.
[11] Diane Vazza, Nick W Kraemer, and Evan M Gunter. 2018 Annual Global Corporate Default
     And Rating Transition Study. Technical report, Standard & Poors, 2019.
[12] Yi Zhang, Xiaohong Chen, and Daejun Park. Formal Specification of Constant Product ( x ×
     y = k ) Market Maker Model and Implementation. 2018.




                                               26
                                                DRAFT



Appendix
A     Scenario Generation
A.1   Regimes of the Geometric Brownian Motion
In this section we discuss a specific property of the geometric Brownian motion that depending on
the requirements can be unsuitable for the generation of scenarios. First, we state this property in
a rather formal manner and provide a more intuitive explanation afterwards.
    A geometric Brownian motion satisfies the following stochastic differential equation

                                     dXt = µXt dt + σXt dWt ,                                    (55)

where Wt is a Brownian motion, µ is the drift parameter and σ the volatility parameter. The
solution is given by                                      
                                                1
                           Xt = X0 exp (µ − σ 2 )t + σWt .                              (56)
                                                2
Xt is log-normally distributed
                                                                  √
                                                                   
                                                          1 2
                            Xt ∼ log N       (ln X0 + (µ − σ )t, σ t .                           (57)
                                                          2

with probability density function
                                                                                   
                                                        x
                             1                (ln       X0       − (µ − 21 σ 2 )t)2
                             √    exp −                                               .        (58)
                           xσ 2πt                                2σ 2 t

   The evolution of the paths of Brownian motions can be classified into three regimes depending
on the drift parameter µ and the volatility parameter σ:

Regime 1: if µ < 21 σ 2 almost all paths are converging to 0,
Regime 2: if µ = 12 σ 2 , at each time point t 50% of the mass is above and 50% is below the initial
    value,

Regime 3: if µ > 12 σ 2 , almost all paths diverge to ∞.

These three cases can be identified by using the relation
                                                                   
                                              ln XV0 − (µ − 12 σ 2 )t
                          P (Xt < V ) = Φ               √
                                                        σ t
                                                                       ,                        (59)


where Φ denotes the cumulative distribution function of the standard normal distribution. For
example in case of the first regime (µ − 12 σ 2 < 0), with time t the probability of Xt being smaller
than any value V ∈ R converges to 1
                                                                       
                                                  ln XV0                √
                    lim P (Xt < V ) = lim Φ 
                                                                   1
                                                      √     − (µ − σ 2 ) t = 1 .               (60)
                   t→∞                 t→∞           σ t           2

Hence, all paths are converging to 0. The two remaining cases follow by similar arguments.
    The thin blue lines in Figure 1 are paths of Brownian motions for each regime. The characteristic
behaviour of each regime is clearly visible in the evolution of the paths (logarithmic scale is used
for the y-axis) - convergence to 0 (Figure 1a), fluctuation around the initial value (Figure 1b) and
divergence to ∞ (Figure 1c). Introducing lines representing percentiles gives a better understanding
of the behaviour. The thick lines illustrate the evolution of a set of percentiles (5%, 25%, 50%, 75%,
95%), i. e. how many paths are below the line at each time and how this fraction is evolving in
time. In Figure 1a for example, 75% of the paths are below the red line (75-th percentile). At time
t=30 the 75-th percentile has dropped to approximately 0.0035 starting from an initial value of 10.


                                                        27
                                                        DRAFT


    The α-th percentile of the geometric Brownian motion is is given by
                                                         √
                                                                  
                                                  1
                            pXt (α) = X0 exp (µ − )t + σ tpN (α) ,                                                     (61)
                                                  2
where pN (α) denotes the α-th percentile of the standard normal distribution. The behaviour of the
percentiles for each regime can be specified
Regime 1: For p ≤ 50%, all percentiles are strictly monotonously decreasing (the exponent of
    pS (p, t) is negative). For p > 50%, the maximum of the p-th percentile occurs at
                                      2                                      
                              σpN (p)                                 1 σpN (p)
                    tmax =                and pSt (p)      = X0 exp               .     (62)
                              σ 2 − 2µ                tmax            2 σ − 2µ
      After reaching the maximum the p-th percentile is decreasing strictly monotonously.
Regime 2: pXt (50%) = X0 for all times t. For p ≤ 50%, all percentiles are strictly monotonously
    decreasing (the exponent of qS (p, t) is negative). If µ = 12 v then the 50th percentile is constant,
    pS (50%, t) = X0 for all times t. It means at each time 50% of the mass is above and 50% is
    below the initial value X0 . Percentiles above 50% are increasing and percentiles below 50%
    are decreasing in time.
Regime 3: This case is similar to the first case. However, almost all paths are converging to ∞.
    For p ≥ 50%, all percentiles are strictly monotonously increasing (the exponent of pS (p, t) is
    positive). For p < 50%, the minimum of the p-th percentile occurs at
                                   2                                           
                           σpN (p)                                     1 σpN (p)
                 tmax =                   and pXt (p)      = X0 exp                 .         (63)
                           σ 2 − 2µ                   tmax             2 σ 2 − 2µ

    It might feel counter-intuitive that the Brownian motion shown in Figure 1a is a martingale and
has constant expectation value. Still, almost all paths are converging to 0. One way to resolve this
alleged conflict is through understanding the consequences of the geometric Brownian motion being
bounded from below and having increasing variance. The increasing variance has to be sustained
by increasing paths as the process has only limited range to deviate downwards. Increasing paths,
however, have to be compensated by decreasing paths as the expectation value is constant. Due to
the limited range, the amount of decreasing paths has to be increasing.

A.2     Geometric Ornstein-Uhlenbeck Process
A geometric Ornstein-Uhlenbeck process satisfies the following stochastic differential equation
                                      dXt = κ(Θ − ln Xt )Xt dt + σXt dWt ,                                             (64)
where Wt is a Brownian motion, κ is the mean-reversion speed, Θ is the drift parameter and σ the
volatility parameter The solution is given by
                                                            Z t
                                          σ2
                                                                              
                           −κt
                  Xt = X0e     exp (θ −      )(1 − e−κt ) +     σi e−κ(t−s) dWs .           (65)
                                          2κ                 0

For our purpose of creating scenarios the Ornstein-Uhlenbeck process has one advantage compared
to the geometric Brownian motion. It is stationary12 , which means it has a probability distribution
that does not change in time. As a consequence, the percentiles of the Ornstein-Uhlenbeck process
converge.
    The distribution of Xt is given by
                                                  σ2            σ2
                                                                                
                                −κt                         −κt            −2κt
                Xt ∼ log N e        log Xt + (θ −    )(1 − e ),     (1 − e      ) .             (66)
                                                  2κ            2κ
Asymptotically, the distribution of Xt converges to
                                                    σ2 σ2
                                                         
                                 lim Xt ∼ log N θ −   ,     .                                                          (67)
                                T →∞                2κ 2κ
  12 A process is called stationary if for all times t , . . . , t and time increments h
                                                      1           n                        P ((Xt , . . . , Xt ) ∈ A ⊂ Rn ) =
P (Xt +h , . . . , Xt +h ) ∈ A ⊂ Rn .
                                                                                                  1        n

       1            n




                                                            28
                                                         DRAFT


As a consequence the percentiles at time T of the geometric Ornstein-Uhlenbeck process are given
by                                                          r                       !
                          −κt               σ2        −κt      σ2
          pXt (α) = exp e     log Xt + (θ −    )(1 − e ) +        (1 − e−2κt )pN (α) .      (68)
                                            2κ                 2κ
In the limit T → ∞ the percentiles converge to
                                                                       r            !
                                                   σ2                      σ2
                              pXt (α) = X0 exp θ −    +                       pN (α) .                   (69)
                                                   2κ                      2κ


B     CP-DOTO Equilibria and Properties
From the perspective of arbitrage traders two cases are profitable:

    1. (1 − ρ)Xgc (t) > Pt which is equivalent to Xcu (t) = Xgu (t)Xgc (t) < 1 − ρ
                                                                              1
    2. Xgc (t) < (1 − ρ)Pt which is equivalent to Xcu (t) = Xgu (t)Xgc (t) > 1−ρ .
   In both cases we are assuming that arbitrage traders will take advantage of the arbitrage
opportunity until it vanishes at time te , i.e. until either (1 − ρ)Xgc (te ) = Pte or Xgc (te ) = (1 − ρ)Pte .
We refer to each of these states as the equilibrium state.
   In the first case the equilibrium state is described by the following set of equations of unknown
time te quantities:


                                    (1 − ρ)Xgc (te ) = Pte                                               (70)
                                        r        r         r     r
                                    C (te )G (te ) = C (t)G (t)                                          (71)
                                    r                r                 m        m
                                C (te ) − C (t) = (1 − ρ)(C (t) − C (te ))                               (72)
                                r               m          r           m
                              G (te ) + G (te ) = G (t) + G (t) .                                        (73)

    The set of equations can be solved to give solutions with regard to time t quantities

                                               C r (t) + (1 − ρ)C m (t)
                                            Pte =                                                        (74)
                                                    Gr (t) + Gm (t)
                                                      s
                                                         Pt
                                    Gr (te ) = Gr (t)                                                    (75)
                                                         Pt e
                                                      r
                                     r          r        Pt e
                                    C (te ) = C (t)                                                      (76)
                                                         P
                                                      s t !
                                                          Pt
                                    Gm (te ) = 1 −              Gr (t) + Gm (t)                          (77)
                                                         Pte
                                                    q
                                                       Pte
                                               1−       Pt
                                     m
                                    C (te ) =              C r (t) − C m (t) .                           (78)
                                                  1−ρ
   In the second case the equilibrium state is described by a similar set of unknown time te
quantities:


                                              Xgc (te ) = (1 − ρ)Pte                                     (79)
                                        r       r         r      r
                                    C (te )G (te ) = C (t)G (t)                                          (80)
                               r               m          r            m
                             C (te ) + C (te ) = C (t) + C (t)                                           (81)
                                    r               r                m          m
                               G (te ) − G (t) = (1 − ρ)(G (t) − G (te )) .                              (82)




                                                           29
                                                    DRAFT


   The set of equations can be solved to give solutions with regard to time t quantities
                                                C r (t) + C m (t)
                                        Pt e =                                                            (83)
                                            Gr (t) + (1 − ρ)Gm (t)
                                                   s
                                                      Pt
                                 Gr (te ) = Gr (t)                                                        (84)
                                                      Pt e
                                                   r
                                  r           r       Pt e
                                 C (te ) = C (t)                                                          (85)
                                                      P
                                                 q t
                                            1 − PPtt
                                 Gm (te ) =             Gr (t) + Gm (t)
                                                      e
                                                                                                          (86)
                                               1−ρ
                                                   r       !
                                  m                   Pte
                                 C (te ) = 1 −               C r (t) + C m (t) .                          (87)
                                                       Pt

In both cases the Celo Dollar price Xgu (te ) at te follows from Xgu (t) = C mU(te ) .

Observation 1.
   i) If (1 − ρ)Xgc (t) > Pt , then Pt < Pte < (1 − ρ)Xgc (t) .
                                     1
  ii) If Xgc (t) < (1 − ρ)Pt , then 1−ρ Xgc (t) < Pte < Pt .

Proof. We prove the second statement. Assume Xgc (t) < (1 − ρ)Pt .

                                          C m (t)           C r (t)            C m (t)           Gm (t)
         Xgc (t) < (1 − ρ)Pt     ⇒                < (1 − ρ)              ⇒             < (1 − ρ)          (88)
                                          Gm (t)            Gr (t)             C r (t)           Gr (t)
                         P
   First, we are show Ptte < 1:
                                                                       m                   m

             Pt e  Gr (t)    C r (t) + C m (t)       1 + CC r (t)
                                                              (t)              C (t)
                                                                      (88) 1 + C r (t)
                  = r                           =                 m    <        m      =1                 (89)
             Pt    C (t) Gr (t) + (1 − ρ)Gm (t)   1 + (1 − ρ) G r (t)      1 + C r (t)
                                                                           G (t)          C (t)

                     P     1
   Next we show X ct(t)
                    e
                        > 1−ρ :
                     g

                                                             r                        r

   Pt e     Gm (t)      C r (t) + C m (t)     1 + CCm(t)
                                                     (t)    (88)       1 + CCm(t)
                                                                              (t)             1
          =                                =         Gr (t)
                                                             >                    C r (t)
                                                                                          =               (90)
  Xgc (t)   C m (t) Gr (t) + (1 − ρ)Gm (t)   1−ρ+ m              1 − ρ + (1 − ρ) m          1 − ρ
                                                             G (t)                         C   (t)

This proves the second statement. The first statement can be proven by similar arguments.
Observation 2.
   i) If (1 − ρ)Xgc (t) > Pt , then Pte is strictly decreasing with regard to Gr (t).
  ii) If Xgc (t) < (1 − ρ)Pt , then Pte is strictly increasing with regard to Gr (t).
Proof. We prove the second statement. Assume Xgc (t) < (1 − ρ)Pt .

                              C m (t)
                  Xgc (t) =           < (1 − ρ)Pt      ⇒         (1 − ρ)Pt Gm (t) − C m (t) > 0           (91)
                              Gm (t)
                                    r       m
                              C (t)+C (t)
   The derivative of Pte = Gr (t)+(1−ρ)Gm (t) is given by



                                  C r (t) + C m (t)
                                                    
            d           d
                 Pt =                                                                                     (92)
          dGr (t) e   dGr (t) Gr (t) + (1 − ρ)Gm (t)
                                Pt Gr (t) + C m (t)      (1 − ρ)Pt Gm (t) − C m (t) (91)
                                                    
                        d
                    =                                  =                          2 > 0                   (93)
                      dGr (t) Gr (t) + (1 − ρ)Gm (t)     (Gr (t) + (1 − ρ)Gm (t))

It follows that Pte is strictly increasing with regard to Gr (t). The first statement can be proven by
similar arguments.


                                                        30
                                                                  DRAFT


Observation 3.
With regard to Gr (t) the limit of the equilibrium price Pte is given by
                                                               lim      Pt e = Pt .                                    (94)
                                                           Gr (t)→∞

Proof. Assume Xgc (t) < (1 − ρ)Pt . Then
                             m                              m                                             m

     Pte      1 + CC r (t)
                       (t)
                                    1 + PCt Gr(t)
                                               (t)              1               1 PCt Gr(t)
                                                                                         (t)
         =              Gm (t)
                               =               Gm (t)
                                                      =            Gm (t)
                                                                          +                  m                         (95)
     Pt    1 + (1 − ρ) r         1 + (1 − ρ) r
                                 G (t)                  1 + (1 − ρ) r
                                                                G (t)       1 + (1 − ρ) G r (t)  G (t)         G (t)
                                                           C m (t)
                         1                                   Pt
                                                                                     r
                                                                                G (t)→∞
         =                 m (t)         +                                               →       1+0 .                 (96)
             1 + (1 − ρ) GGr (t)             Gr (t) + (1 − ρ)Gm (t)

Assume (1 − ρ)Xgc (t) < Pt . Then
                                         C m (t)                           C m (t)                         C m (t)
             Pte   1 + (1 − ρ) C r (t)   1 + (1 − ρ) Pt Gr (t)     1         (1 − ρ) Pt Gr (t)
                 =         Gm (t)      =         G m (t)       =   G m (t) +          m                                (97)
             Pt       1+ r         G (t)     1+ r                1+ rG (t)     1 + G r (t)        G (t)   G (t)
                                                           m
                             1               (1 − ρ) C Pt(t)         Gr (t)→∞
                 =           Gm (t)
                                         +                              →            1+0 .                             (98)
                     1 + Gr (t)              Gr (t) + Gm (t)



Observation 4.
   i) If (1 − ρ)Xgc (t) > Pt , then
                                                                                   2Xcu (t)
                                                      lim       Xcu (te ) =          1    Pt
                                                                                                 .
                                                    r
                                                   G (t)→∞                      1 + 1−ρ  X c (t) g


     If Xcu (t) = XPc (t)
                      t
                          after an oracle update, then
                    g

                                                                                             2
                                                      lim        Xcu (te ) =      1     c
                                                                                              .
                                                                                 1−ρ + Xu (t)
                                                   Gr (t)→∞


  ii) If Xgc (t) < (1 − ρ)Pt , then
                                                                                  2Xcu (0)
                                                     lim       Xcu (te ) =                        .
                                                   r
                                               G (t)→∞                        1 + (1 − ρ) XPc (t)
                                                                                              t
                                                                                                     g


     If Xcu (t) = XPc (t)
                      t
                          after an oracle update, then
                     g

                                                                                     2
                                                    lim        Xcu (te ) =                      .
                                               Gr (t)→∞                       (1 − ρ) + Xuc (t)

Proof. We prove the first statement. We calculate limGr (t)→∞ C m (te ) and use C m (te ) = C m (t) −
 1     r         r
1−ρ (C (te ) − C (t)).
                                r
         r         r       r      Pt e
       C (te ) − C (t) = C (t)          − C r (t)                                                (99)
                                  Pt
                                 s                      m

                              r
                                     Gr (t) + (1 − ρ) C Pt(t) )
                       = Pt G (t)                               − Pt Gr (t)                     (100)
                                          Gr (t) + Gm (t)
                               s
                                                                            C m (t)
                                       Gr (t) + Gm (t) Gr (t) + (1 − ρ) Pt )
                     =Pt Gr (t) 1 − r                  +                            − Pt Gr (t) (101)
                                       G (t) + Gm (t)           Gr (t) + Gm (t)
                               s
                                       1−ρ m
                                           C (t) − Gm (t)
                     =Pt Gr (t) 1 + Pt r                      − Pt Gr (t)                       (102)
                                         G (t) + Gm (t)
                                         1−ρ m
                                                                                  !
                                                        m
                          r            1 Pt C (t) − G (t)               1
                     =Pt G (t) 1 +                              + O( r ) − 1                    (103)
                                       2 Gr (t) + Gm (t)              G (t)


                                                                      31
                                                           DRAFT


In the limit, the difference of the Celo Dollar wallet at time t and te converges to
                                                               1
                            lim      (C r (te ) − C r (t)) =     ((1 − ρ)C m (t) − Pt Gm (t)) .                  (104)
                          Gr (t)→∞                             2

Therefore, the Celo Dollar market tank is given by

                                                                                                    Pt Gm (t)
                                                                                                             
                                        1 1                                1
        lim   C m (te ) = C m (t) −         ((1 − ρ)C m (t) − Pt Gm (t)) =                C m (t) +             (105)
      r
  G (t)→∞                              1−ρ2                                2                         (1 − ρ)

   The Celo Dollar price is given by

                          U      Gr (t)→∞             U                 2 C mU(t)       2Xgu (t)
         Xcu (te ) =                 →                           =             m =      1    Pt
                                                                                                      .
                       C m (te )          1                 m
                                              C m (t) + Pt G (t)     1 + Pt Gm (t)   1 + 1−ρ  X c (t)
                                             2                 (1−ρ)             1−ρ C   (t)                 g



The second statement can be proven by similar arguments.

B.1      Parameters for Figures 8 - 10b


                   Parameter            Fig. 8         Fig. 9              Fig. 10a            Fig. 10b
                   Tank U               10 000         10 000 / 100 000    100 000 000         100 000 000
                   Xgu                  2              2                   2                   2
                   Xgc                  3              3                   3                   3
                   Fee ρ                0.05           0.05                0.05                0.05
                   Fraction φr          0.001          0.001               0.1                 0.001
                   Reserve CELO         100 000 000    100 000 000         100 000 000         100 000 000
                                                                           1 u                 1 u
                   P                    2              2                    X (t)∗
                                                                           5 g
                                                                                                X (t)∗
                                                                                               5 g
                   Iterations           15             20                  100                 100

Table 3: The table contains the parameters that have been used to generate the examples in Figures 8 -
10b. On-chain CELO prices P with a ∗ are assumed to be affected by oracle manipulation: Instead of the
true CELO market price Xgu (t) the value 51 Xgu (t) is used to update the on-chain price Pt := 15 Xgu (t).




                                                               32
                                                                  DRAFT


C    CP-DOTO Parameter Setting

                              Parameter   Settings        Explanation
                              Q0          20 000 000      Initial value
                              κd          0.001           Mean reversion speed
                              σd          100%            Volatility
                                                σ2
           Demand




                              Θd          Q0 + 2κd        Drift
                                                  d
                              µdidio      0%              Mean parameter for idiosyncratic jump size
                               d
                              σidio       30%             Volatility of idiosyncratic jump size
                              λdidio      5               Idiosyncratic jump intensity
                              µρd,a       0.5             Mean of correlation btw. demand and crypto assets
                              σρd,a       0.05            Volatility of correlation btw. demand and crypto assets
                              A0          1               Initial value
                              κa          0.001           Mean reversion speed
                              σa          100%            Volatility of demand
           Cryptomarket




                                                  σ2
                              Θa          Q0 + 2κd        Drift
                                                   d
                              µa
                               idio       0%              Mean parameter idiosyncratic jump size
                               a
                              σidio       30%             Volatility of idiosyncratic jump size
                               a
                              λidio       5               Idiosyncratic jump intensity
                              µa
                               syst       0%              Mean parameter systematic jump size
                               a
                              σsyst       30%             Volatility of systematic jump size
                               a
                              λsyst       2               Systematic jump intensity
                              v           20              Annual velocity of Celo Dollars
                              s           0.5%            Stability fee
                              r           25%             Discount rate
                              f           0.2%            Utility fee
                              µ̂          27.46%          Market expected Celo Dollar Growth
                              N           3               Number of non-Celo reserve assets
           Protocol & Macro




                              rg          0.5             Target percentage of CELO in the reserve
                              ν           10%             Ownership dilution per annum
                              ρ           0.5%            Spread for CP-DOTO transactions
                              fbal        14              Rebalancing frequency
                              φr          0.1             Reserve fraction
                                          1
                              fupdate     24
                                                          Daily update frequency of CP-DOTO
                              Gtotal      1 000 000 000   Total number of CELO coins
                              Greserve    120 000 000     Initial number of CELO coins in the reserve
                              λdef        3%              Initial default probability of non-volatile assets
                              τd          0.5             Reserve threshold Celo Dollar demand spiral
                              τg          0.5             Reserve threshold CELO price spiral
                              τ1r         0.75            Reserve threshold 100% non-volatile assets
                              τ0r         1.5             Reserve threshold 0% non-volatile assets

Table 4: This table gives an overview over the main parameters used in this simulation analysis. Many
of these parameter choices are subjective and different choices will necessarily lead to different stability
results. Protocol related parameter choices might not coincide with the protocol parameters at launch of
the network.




                                                                   33
